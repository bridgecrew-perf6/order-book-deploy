var x=Object.defineProperty,E=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var A=(e,r,t)=>r in e?x(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,f=(e,r)=>{for(var t in r||(r={}))I.call(r,t)&&A(e,t,r[t]);if(v)for(var t of v(r))k.call(r,t)&&A(e,t,r[t]);return e},g=(e,r)=>E(e,D(r));import{j as a,r as i,S as z,a as d,m as R,_ as P,D as T,F as j,R as W,b as F}from"./vendor.31804228.js";const U=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};U();const V="_mainBody_uu3mj_1";var X={mainBody:V};const Z=({children:e})=>a("main",{className:X.mainBody,children:e});const G=({options:e,placeholder:r,search:t,emptyMessage:s,defaultValue:n,value:o,onChange:l,filterOptions:b})=>{const C=i.exports.useMemo(()=>e,[e.length]);return a(z,{options:C,search:t,onChange:y=>l(y),value:o!=null?o:n,placeholder:r,emptyMessage:s,filterOptions:b})},q="_table_z3uy6_1",K="_tableHeaderItem_z3uy6_13",J="_tableHeaderRow_z3uy6_41",Q="_tableRow_z3uy6_49",Y="_tableRowItem_z3uy6_57";var m={table:q,tableHeaderItem:K,tableHeaderRow:J,tableRow:Q,tableRowItem:Y};const ee={hidden:{opacity:0},show:{opacity:1,transition:{delayChildren:.5}}},re={hidden:{opacity:0},show:{opacity:1}},S=({data:e,columnNames:r,columnDataKeys:t})=>d(R.table,{className:m.table,initial:"hidden",animate:"show",variants:ee,children:[a("thead",{children:a("tr",{className:m.tableHeaderRow,children:r.map(s=>a("th",{className:m.tableHeaderItem,children:s},s))})}),a("tbody",{children:e&&e.length?e.map((s,n)=>a(R.tr,{variants:re,className:m.tableRow,children:t.map(o=>a("td",{className:m.tableRowItem,children:s[o]},o+Math.random()))},n+Math.random())):a("tr",{children:a("td",{children:"No data"})})})]}),te="_tableWrapper_79m3v_1",ae="_orderTable_79m3v_9",oe="_tableHeader_79m3v_17",ne="_firstTable_79m3v_35",se="_secondTable_79m3v_51";var p={tableWrapper:te,orderTable:ae,tableHeader:oe,firstTable:ne,secondTable:se};const B=["Rate","Amount","Value","Offers number"],w=["ra","ca","value","co"],ce=({buy:e,sell:r})=>d("div",{className:p.orderTable,children:[d("div",{className:`${p.tableWrapper} ${p.firstTable}`,children:[a("header",{className:p.tableHeader,children:"Bid"}),a(S,{data:e,columnDataKeys:w,columnNames:B})]}),d("div",{className:`${p.tableWrapper} ${p.secondTable}`,children:[a("header",{className:p.tableHeader,children:"Ask"}),a(S,{data:r,columnDataKeys:w,columnNames:B})]})]}),le="https://api.zonda.exchange/rest/trading",ie=`${le}/orderbook-limited`,de=(e,r=10)=>fetch(`${ie}/${e}/${r}`).then(t=>t.json()).then(t=>t),pe="_spinnerWrapper_kdtxr_1";var ue={spinnerWrapper:pe};const me=()=>a("div",{className:ue.spinnerWrapper,children:a(P,{})}),he={buy:[],sell:[],status:"",timestamp:0,number:0,seqNo:0},be=[{AlphabeticCode:"BSV",Currency:"Bitcoin SV"},{AlphabeticCode:"BTC",Currency:"Bitcoin"},{AlphabeticCode:"DASH",Currency:"Dash"},{AlphabeticCode:"DOGE",Currency:"Dogecoin"},{AlphabeticCode:"EOS",Currency:"EOS"},{AlphabeticCode:"LTC",Currency:"Litecoin"},{AlphabeticCode:"ETH",Currency:"Ethereum"},{AlphabeticCode:"XLM",Currency:"Stellar Lumen"},{AlphabeticCode:"XMR",Currency:"Monero"},{AlphabeticCode:"XRP",Currency:"Ripple"},{AlphabeticCode:"XTZ",Currency:"Tez"},{AlphabeticCode:"ZEC",Currency:"Zcash"}],Ce=[{AlphabeticCode:"EUR",Currency:"Euro"},{AlphabeticCode:"USD",Currency:"US Dollar"},{AlphabeticCode:"GBP",Currency:"Pound Sterling"},{AlphabeticCode:"PLN",Currency:"Zloty"}],H=(e,r)=>e.map(t=>Number(t[r])),$=e=>Math.max(...e),L=e=>T.fromMillis(Number(e)).toFormat("dd/MM/yyyy"),ye=()=>{const e=[];return be.forEach(r=>{const t=Ce.map(s=>f({value:`${r.AlphabeticCode}-${s.AlphabeticCode}`,name:`${r.AlphabeticCode}-${s.AlphabeticCode}`},s));e.push(...t)}),e},h=e=>e.toLowerCase(),fe=e=>r=>e.filter(t=>h(t.name).includes(h(r))||h(t.value).includes(h(r))),_e="_orderBookHeader_ro2z6_1",Ne="_tablesContainer_ro2z6_15",ve="_responseNotice_ro2z6_25";var _={orderBookHeader:_e,tablesContainer:Ne,responseNotice:ve};const Ae=()=>{const[e,r]=i.exports.useState(he),[t,s]=i.exports.useState(),[n,o]=i.exports.useState("idle"),[l,b]=i.exports.useState("BTC-PLN"),C=i.exports.useMemo(()=>ye(),[]),y=async()=>{s(void 0),o("pending");try{const c=await de(`${l}`);"errors"in c?(o("rejected"),s(c.errors[0])):(r(c),o("resolved"))}catch(c){o("rejected"),s(c)}};i.exports.useEffect(()=>{l&&y()},[l]);const N=c=>c.map(u=>g(f({},u),{value:(Number(u.ra)*Number(u.ca)).toFixed(3)})),M=c=>{b(c)},O=(c,u)=>(c-u).toFixed(3);return d(j,{children:[d("header",{className:_.orderBookHeader,children:[a(G,{search:!0,placeholder:"Currency",name:"tradingPair",value:l,defaultValue:"BTC-PLN",options:C,onChange:M,filterOptions:fe}),d("div",{children:["Spread:",n==="pending"||!e.sell.length?0:O($(H(e.sell,"ra")),$(H(e.buy,"ra")))]}),a("div",{children:e.timestamp?L(e.timestamp):L(T.now().toMillis())})]}),a("div",{className:_.tablesContainer,children:n==="pending"?a(me,{}):!t&&!!e.sell.length?a(ce,{buy:N(e.buy),sell:N(e.sell)}):a("div",{className:_.responseNotice,children:"No data found"})})]})};function ge(){return a("div",{className:"App",children:a(Z,{children:a(Ae,{})})})}W.render(a(F.StrictMode,{children:a(ge,{})}),document.getElementById("root"));
